(()=>{"use strict";class t{constructor(t){this.name=t,this.tasks=[]}getName(){return this.name}setName(t){this.name=t}getTasks(){return this.tasks}setTasks(t){this.tasks=t}getTask(t){return this.tasks.find((e=>e.getTitle()===t))}isInTasks(t){return this.tasks.some((e=>e.getTitle()===t))}addTask(t){this.isInTasks(t.getTitle())||this.tasks.push(t)}deleteTask(t){this.tasks=this.tasks.filter((e=>e.getTitle()!==t))}}class e{constructor(){this.projects=[]}getProjects(){return this.projects}setProjects(t){this.projects=t}getProject(t){return this.projects.find((e=>e.getName()===t))}isInProjects(t){return this.projects.some((e=>e.getName()===t))}addProject(t){this.isInProjects(t.getName())||this.projects.push(t)}deleteProject(t){this.projects=this.projects.filter((e=>e.getName()!==t))}}class s{constructor(t,e,s,o){this.title=t,this.description=e,this.dueDate=s,this.priority=o,this.complete=!1}getTitle(){return this.title}setTitle(t){this.title=t}getDescription(){return this.description}setDescription(t){this.description=t}getDueDate(){return this.dueDate}setDueDate(t){this.dueDate=t}getPriority(){return this.priority}setPriority(t){this.priority=t}getComplete(){return this.complete}setComplete(t){this.complete=t}}class o{static saveList(t){localStorage.setItem("list",JSON.stringify(t))}static getList(){let o=Object.assign(new e,JSON.parse(localStorage.getItem("list")));return o.setProjects(o.getProjects().map((e=>Object.assign(new t,e)))),o.getProjects().forEach((t=>t.setTasks(t.getTasks().map((t=>Object.assign(new s,t)))))),o}static addProject(t){let e=this.getList();e.addProject(t),this.saveList(e)}static deleteProject(t){let e=this.getList();e.deleteProject(t),this.saveList(e)}static addTask(t,e){let s=this.getList();s.getProject(t).addTask(e),this.saveList(s)}static deleteTask(t,e){let s=this.getList();s.getProject(t).deleteTask(e),this.saveList(s)}static setTaskComplete(t,e,s){let o=this.getList();o.getProject(t).getTask(e).setComplete(s),this.saveList(o)}}class n{constructor(){this.projectForm=document.createElement("form")}resetProjectForm(){this.projectForm.style.display="none",this.projectForm.reset()}addProjectToList(){let e=this.projectForm.name.value,s=new t(e);o.addProject(s),(new r).createListContainer(),this.resetProjectForm()}createProjectForm(){this.projectForm.setAttribute("id","project-form"),this.projectForm.setAttribute("action","''"),this.projectForm.setAttribute("method","get");const t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("name","name"),t.setAttribute("id","name"),t.setAttribute("placeholder","project name");const e=document.createElement("button");return e.setAttribute("type","submit"),e.textContent="Submit",this.projectForm.appendChild(t),this.projectForm.appendChild(e),this.projectForm.style.display="none",this.projectForm.addEventListener("submit",(t=>{t.preventDefault(),this.addProjectToList()})),this.projectForm}}class i{constructor(){this.taskForm=document.createElement("form")}resetTaskForm(){this.taskForm.style.display="none",this.taskForm.reset()}addTaskToProject(){let t=this.taskForm.title.value,e=this.taskForm.description.value,n=this.taskForm.dueDate.value,i=this.taskForm.priority.value,c=new s(t,e,n,i),r=document.querySelector(".project-name").textContent;o.addTask(r,c),(new a).createProjectContainer(),this.resetTaskForm()}createTaskForm(){this.taskForm.setAttribute("id","task-form"),this.taskForm.setAttribute("action","''"),this.taskForm.setAttribute("method","get");const t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("name","title"),t.setAttribute("id","title"),t.setAttribute("placeholder","title");const e=document.createElement("input");e.setAttribute("type","text"),e.setAttribute("name","description"),e.setAttribute("id","description"),e.setAttribute("placeholder","description");const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("name","dueDate"),s.setAttribute("id","dueDate"),s.setAttribute("placeholder","due date");const o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("name","priority"),o.setAttribute("id","priority"),o.setAttribute("placeholder","priority");const n=document.createElement("button");return n.setAttribute("type","submit"),n.textContent="Submit",this.taskForm.appendChild(t),this.taskForm.appendChild(e),this.taskForm.appendChild(s),this.taskForm.appendChild(o),this.taskForm.appendChild(n),this.taskForm.style.display="none",this.taskForm.addEventListener("submit",(t=>{t.preventDefault(),this.addTaskToProject()})),this.taskForm}}class c{constructor(){this.taskTitle=document.querySelector(".active-task").textContent,this.projectName=document.querySelector(".active-project").textContent,this.task=o.getList().getProject(this.projectName).getTask(this.taskTitle)}createTaskContainer(){const t=document.getElementById("content");let e;document.body.contains(document.querySelector(".task-container"))?(e=document.querySelector(".task-container"),e.textContent=""):(e=document.createElement("div"),e.classList.add("task-container"));const s=document.createElement("h2");s.classList.add("task-title"),s.textContent=this.task.getTitle();const n=document.createElement("p");n.classList.add("task-description"),n.textContent=this.task.getDescription();const i=document.createElement("p");i.classList.add("task-due-date"),i.textContent=this.task.getDueDate();const c=document.createElement("p");c.classList.add("task-priority"),c.textContent=this.task.getPriority();const r=document.createElement("div");r.classList.add("task-actions");const d=document.createElement("button");d.classList.add("task-complete-btn"),!0===this.task.getComplete()?d.textContent="Mark as incomplete":d.textContent="Mark as complete",d.addEventListener("click",(()=>{let t=document.querySelector(".active-task");t.classList.contains("task-incomplete")?(t.classList.remove("task-incomplete"),t.classList.add("task-complete"),d.textContent="Mark as incomplete",o.setTaskComplete(this.projectName,this.taskTitle,!0)):(t.classList.remove("task-complete"),t.classList.add("task-incomplete"),d.textContent="Mark as complete",o.setTaskComplete(this.projectName,this.taskTitle,!1))}));const l=document.createElement("button");l.textContent="Delete Task",l.classList.add("del-task-btn"),l.addEventListener("click",(()=>{o.deleteTask(this.projectName,this.taskTitle),(new a).createProjectContainer()})),r.appendChild(d),r.appendChild(l),e.appendChild(s),e.appendChild(n),e.appendChild(i),e.appendChild(c),e.appendChild(r),t.appendChild(e)}}class a{constructor(){this.projectName=document.querySelector(".active-project").textContent,this.project=o.getList().getProject(this.projectName)}createProjectContainer(){const t=document.getElementById("content");let e;document.body.contains(document.querySelector(".project-container"))?(e=document.querySelector(".project-container"),e.textContent="",document.body.contains(document.querySelector(".task-container"))&&(document.querySelector(".task-container").textContent="")):(e=document.createElement("div"),e.classList.add("project-container"));const s=document.createElement("div");s.classList.add("project-header");const n=document.createElement("h1");n.classList.add("project-name"),n.textContent=this.projectName;const c=document.createElement("p");c.classList.add("tasks-remaining");const a=this.showTasks();a.classList.add("task-list");const d=(new i).createTaskForm(),l=document.createElement("button");l.textContent="Add task",l.classList.add("add-task-btn");const m=document.createElement("div");m.classList.add("project-actions");const p=document.createElement("button");p.textContent="Clear completed tasks",p.classList.add("clear-completed-btn");const u=document.createElement("button");u.textContent="Delete Project",u.classList.add("del-project-btn"),u.addEventListener("click",(()=>{o.deleteProject(this.projectName),(new r).createListContainer()})),l.addEventListener("click",(()=>{d.style.display="block"})),s.appendChild(n),s.appendChild(c),m.appendChild(p),m.appendChild(u),e.appendChild(s),e.appendChild(a),e.appendChild(d),e.appendChild(l),e.appendChild(m),t.appendChild(e)}showTasks(){let t=this.project.getTasks();const e=document.createElement("div");for(let s=0;s<t.length;s++){let o=t[s];const n=document.createElement("button");n.textContent=o.getTitle(),!0===o.getComplete()&&n.classList.add("task-complete"),n.addEventListener("click",(()=>{document.body.contains(document.querySelector(".active-task"))&&document.querySelector(".active-task").classList.remove("active-task"),n.classList.add("active-task"),(new c).createTaskContainer()})),e.appendChild(n)}return e}}class r{constructor(){this.list=o.getList()}createListContainer(){const t=document.getElementById("content");let e;document.body.contains(document.querySelector(".list-container"))?(e=document.querySelector(".list-container"),e.textContent="",document.body.contains(document.querySelector(".project-container"))&&(document.querySelector(".project-container").textContent=""),document.body.contains(document.querySelector(".task-container"))&&(document.querySelector(".task-container").textContent="")):(e=document.createElement("div"),e.classList.add("list-container"));const s=document.createElement("h1");s.classList.add("list-header"),s.textContent="Projects";const o=this.showProjects();o.classList.add("project-list");const i=(new n).createProjectForm(),c=document.createElement("button");c.textContent="Add project",c.classList.add("add-project-btn"),c.addEventListener("click",(()=>{i.style.display="block"})),e.appendChild(s),e.appendChild(o),e.appendChild(i),e.appendChild(c),t.appendChild(e)}showProjects(){let t=this.list.getProjects();const e=document.createElement("div");for(let s=0;s<t.length;s++){let o=t[s];const n=document.createElement("button");n.textContent=o.getName(),n.addEventListener("click",(()=>{document.body.contains(document.querySelector(".active-project"))&&document.querySelector(".active-project").classList.remove("active-project"),n.classList.add("active-project"),(new a).createProjectContainer()})),e.appendChild(n)}return e}}(new r).createListContainer()})();